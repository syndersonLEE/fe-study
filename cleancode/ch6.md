# 6장 객체와 자료 구조

### 자료 추상화

- 추상 인터페이스를 제공하여 구현을 모른 채 자료의 핵심을 조작할 수 있어야함
- 자료를 직접적으로 공개하지 않고 필요한 데이터를 효과적으로 보여주어야 함

### 자료/객체 비대칭

- 자료를 다루는 함수에서 객체와 자료 구조를 바꾸는 두 가지 방법은 사실상 반대 -> 객체와 자료 구조는 근본적으로 양분

- 객체 지향 코드에서 어려운 변경은 절차에서 어렵고 반대이기도 하다
    - 새로운 자료 타입이 필요한 경우 -> 객체 지향
    - 새로운 함수가 필요한 경우 -> 절차 지향

### 디미터 법칙

- 모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다
- ex) 클래스 C의 메서드 f는 1.클래스 2.f가 생성한 객체 3.f 인수로 넘어온 객체 4. C 인스턴스 변수에 저장된 객체만 호출해야한다

##### 기차 충돌

- 여러 객체가 한줄 처럼 이어진 기차처럼 보이는 것은 조잡하게 보인다
- 내부 구조를 유출하지 않도록, 함수 없이 공개 변수만 포함하도록 하면 좋다

##### 잡종구조 

- 절반은 객체 절반은 자료 구조인 구조나 공개 조회/설정 함수 같은 경우 비공개 변수를 그대로 노출한다 -> 쓰지마라

##### 구조체 감추기

```
ctxt.getAbsolutePathOfScratchDirectoryOption()
ctx.getScratchDirectoryOption().getAbsolutePath()
```

- 첫번째는 ctxt 객체에 공개하는 자료가 많다 -> 두번째처럼 쓰는 것이 좋다

```
BufferedOutputStream bos = ctxt.createScratchFileStream(classFileName);
```
- 위 함수처럼 내부 구조를 드러내지 않으면서 자신이 몰라야 하는 여러 객체를 탐색할 필요가 없다

### 자료 전달 객체

- 일반적인 형태는 'bean' 구조로 비공개 변수를 조회/설정 함수로 조작한다

##### 활성 레코드

- DTO의 특수한 형태로 save/find같은 탐색 함수도 제공
- DB의 테이블이나 다른 소스의 자료를 직접 변환
- 활성 레코드에 비즈니스 규칙 메서드를 추가하는 것은 잡종 레코드를 양상할 가능성이 있음

### 결론

- 객체는 동작을 공개하고 자료를 숨겨야한다
- 객체 지향의 경우 새 동작을 추가하기는 어렵지만 새 객체 타입 추가는 쉽다


