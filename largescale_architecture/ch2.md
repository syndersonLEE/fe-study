# Ch2. Large Scale Data Process Introduction

### lecture 4

#### 하테나 북마크 데이터 규모

- 특정 테이블 조회 수 : 3억 5천만 레코드 이상
- 북마크 데이터 규모 : 1520만 - 3GB
- 북마크 테이블 : 4500만 - 5.5GB
- tag 테이블 : 5000만 - 태그 4.8GB, HTML 200GB

### lecture 5

#### 대규모 데이터를 다룰 때 어려운 점

메모리내에서 계산이 불가능

- 디스크에 있는 데이터를 검색
- 느림 I/O에 많은 시간 소요
- 메모리에 비해 약 10만 ~ 100만배 소요

#### 디스크가 느린 이유

- 물리적 헤드 이동 및 원반의 회전
- 메모리(7.5GB) 와 디스크 (58MB) 의 버스 속도 차 - 약 100배

#### 병목의 기본 문제

- Load Average : 시스템 전체 부하상황 파악
- CPU 부하
    - 원인 : 병목 or 시스템 프로그램 : top이나 sar
    - 찾는 방법
        - ps - 프로세스 확인 / strace, oprofile로 프로파일링
    - 일반적인 원인
        - 디스크나 메모리 용량 문제 : 서버 증설, 로직 개선
        - 프로그램 폭주 : 오류 제거
- I/O 부하 개선
    - 원인
        - 극단적인 메모리 소비 확인
        - 프로그램 오류로 인한 메모리 과다 사용
        - 메모리 부족
    - 해결
        - 메모리 증설
        - 캐시서버 도입, I/O 빈도를 줄이기

#### lecture 6

#### 규모 조정 확장성

- 일반적으로는 하드웨어 성능을 높히는 스케일업보다 스케일 아웃이 주류
- 가격과 성능이 비례 하지 않음

#### 규모조정의 요소

1. CPU 부하
2. I/O 부하

#### 웹 어플리케이션 

- AP 서버는 CPU 부하가 주로 걸림
- AP 서버는 데이터를 분산을 가지고 있지 않으므로 스케일 아웃 방식으로 확장하면 된다
- DB서버는 I/O부하가 걸림 -> 따라서 간단히 분산불가

#### DB 확장성 확보의 어려움

- CPU 부하 분산 조정
    - 같은 구성 서버를 늘리고 로드밸런서로 분산
    - 웹, AP서버, 크롤러

#### 두 종류의 부하와 웹 어플리케이션

1. CPU 부하
2. I/O 부하

- 대규모 과학 계산 - CPU 부하
- 디스크 데이터 색인 -> I/O 바운드 프로그램 : 일반적인 웹 어플리케이션 문제 요소

#### 멀티테스킹 OS & 부하

- top 명령어의 load average
    - load average : 0.7, 0.66, 0.59 - 1분, 5분, 15분의 Interrupt 시간 - 많을 수록 부하가 높음
        - 처리를 실행 할 수 없어 대기하는 프로세스 수와 비례
            - CPU 실행 권한을 대기하는 프로세스
            - 디스크 I/O 대기 프로세스

### lecture 7

#### 대규모 데이터 다루는 세가지 급소

1. 어떻게 메모리에서 처리를 마치는가
    - 디스크 seek회수 최소
    - 국소성 분산 실현
2. 데이터량에 강한 알고리즘
    - 이분 검색 등을 사용
3. 데이터 압축 및 정보 검색 기술
