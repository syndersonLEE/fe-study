# 2장 진화적 아키텍트

- 각각의 팀이 어떤 프로그래밍 시스템을 선택하는 가에 대한 선택에 대한 페이지

## 2.1 부정확한 비교

시스템 아키텍쳐에 대한 이해

- 타 직업의 건축가, 엔지니어의 아키텍처와의 다른 관점
- 건축가의 아키텍처는 다른 사람이 해석하고 실행 할 수 있도록 세부 계획을 세우는 역할
- 같은 관점에서 접근 한다면, 알 수 없는 미래를 기반으로 설계를 해야하므로 재정의 필요

## 2.2 아키텍트에 대한 진화적 관점

- 소프트웨어 아키텍트는 소비자의 요구사항에 따라 지속적인 변경 필요
- 시스템을 구역화하고 시스템에 관련된 모든 사람을 수용할 수 있는 시스템을 격리해야 함
    - 과정에서 내부적 일보다 격리 자체에 더 신경을 쓰는 것이 좋고, 시스템에 대한 정의를 제대로 내리는 것이 중요
    - 현재의 목적과 부합하는 것이 중요

## 2.3 구역화

시스템 내의 일보다 시스템 사이의 일이 중요

- 시스템 간의 자유를 준다 하더라도 이를 공유할 수 과정, 해당 팀원을 채용과정에서 어려움이 생길 수 있음
- 넷플릭스의 경우 이 문제에 대해서 DB를 카산드라로 통일
- 내부에 일에서는 자유로워도 되지만 이를 통신하는 방법에 대해서는 엄격해야한다.

## 2.4 원칙적인 접근법

시스템의 Trade-off를 해결하기 위해 <b>프레이밍</b>을 통해서 트레이드오프를 제공

### 2.4.1 전략적 목표

팀의 전략적 목표가 조직이 지향하는 바와 일치해야 한다

### 2.4.2 원칙

원칙은 규칙
- 그러나 부담이 되어선 안되기에 10개 미만으로 제약

### 2.4.3 실천 사항

원칙을 실행하는 방법
- ex.HTTP/REST가 표준 통합 스타일 
- 아키텍트의 원칙을 뒷받침 해야하는 실천 사항

### 2.4.4 원칙과 실천 사항의 결합

작은 조직의 경우 큰 문제가 되지 않음 <-> 큰 조직의 경우 언어나 프레임워크가 다른 팀에 대해서 둘을 분리하는 것이 좋음

### 2.4.5 실제 사례

전략적 목표 - 아키텍쳐 원칙 - 설계와 배포의 실천 사항

## 2.5 필수 기준

- 시스템에 어느정도 변동성을 허용 가능한가
- 시스템을 받칠 수 있는 인력에 대한 최소 기준선

### 2.5.1 모니터링

모든 서비스가 자기 상태와 일반적인 모니터링 관련 지표를 동일한 방식으로 전송

### 2.5.2 인터페이스

인터페이스 기술의 수는 최소로 유지하는 편이 좋음
- HTTP/REST를 택한다면 동사형, 명사형 어느 것을 사용할 것인가
- 페이징, 엔드포인트 버전에 대한 구분 등등

### 2.5.3 아키텍처 안정성

오동작하는 하나의 컴포넌트가 시스템 전체를 망쳐서는 안된다.
- 모든 서비스가 circit breaking을 하거나 최소한 하위 프로그램이 쓰레드 관리를 직접 해야함

## 2.6 코드를 통한 통제

본보기와 서비스 템플릿을 제공하여 옳은 것을 행하게 한다

### 2.6.1 본보기

우리가 실제 사용하는 서비스를 통해 예시를 보여줘야 함

### 2.6.2 맞춤형 서비스 템플릿

대부분의 템플릿 코드가 갖추어져 있고, 환경 변수를 통해 바로 사용 가능
- Hystrix같은 라이브러리를 통해 회로 차단, metric을 Drop wizard같은 곳으로 일괄 전송을 통해 정의 가능
- 서비스를 Template화 하여 (Spring Cloud가 대표적 예시) 시스템에 대한 지도 가능
- 다만 이런 작업이 중앙집권적이 아닌 다같이 협업하는 집단 활동이 되어야 함
- 템플릿에 대한 업데이트에 의한 위험성 << 시스템 커플링으로 인한 장애

## 2.7 기술 부채

기술 비전을 충실히 이행 못하고 절차를 무시하였을 때 장기적으로 발생하는 비용
- 기술 부채가 누적이 되면 현실 부채롷 이어지며 지속적 비용이 발생

## 2.8 예외 처리

충분히 많은 예외가 발견된다면 원칙을 제고
- 많은 제약이 필요한 조직 -> 마이크로서비스가 어울리지 않음

## 2.9 거버넌스 지휘

거버넌스란 기업이 이해관계자의 요구,조건,선택을 위해 목표에 대한 다양한 과정을 모니터링하는 것

- 결과물이 기업에 대한 비전을 일치해야 함
    - 아키텍트 의장 그룹 보유
    - 기술 전문가로 구성된 다수의 그룹을 보유
- 팀원의 모든 결정에 제한을 둘 필요는 없지만, 큰 흐름에 대해서는 기각 -> 거시적인 관점에서 목표 달성을 바라봄

## 2.11 결론

- 비전 : 명료하게 소통되고, 기술 비전의 유무에 대한 확인
- 공감 : 결정에 대한 파급력 이해
- 협업 : 많은 동료와 협업 필요
- 적응성 : 고객과 조직이 요구하는 것을 반영하는 가?
- 자율성 : 올바른 균형을 찾아야한다
- 거버넌스 : 시스템이 기술 비전과 맞는가?


