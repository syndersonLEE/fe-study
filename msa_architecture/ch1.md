# 1장 마이크로서비스

## 1.1 마이크로서비스란?

### 1.1.1 작고 한 가지 일을 잘하는 데 주력

마이크로서비스 크기에 대한 의문? - 얼마나 작아야 작은 것인가?
- 충분히 작아서 더 이상 작아질 수 없는 수준
- 의존성 문제를 줄이고 혜택과 단점을 극대화 가능

### 1.1.2 자율성

마이크로서비스는 분리된 개체
- 모든 통신은 네트워크 호출을 통해 이루어짐
- 서비스의 API를 공개하며 API를 통한 상호 협업을 통해 통신

## 1.2 주요 혜택

### 1.2.1 기술 이기종성

각 서비스가 다른 기술을 사용할 수 있도록 결정 가능
- 다양한 독립 서비스로 구성된 시스템에 시험 가능
- Netflix나 Twitter은 JVM을 플랫폼으로 이용 -> MSA를 통해 완화

### 1.2.2 회복성

한 시스템의 컴포넌트에 장애가 발생하더라도 서비스의 경계 상 차단을 통해 시스템 전체의 마비를 막음
- 하지만 새로운 장애 요소 발생

### 1.2.3 확장성

모놀로직과는 다르게 필요한 서비스만 확장 가능
- 유동적인 부하 분산 시스템 구축 가능

### 1.2.4 배포 용이성

한 줄만 수정해도 전체가 배포가 필요한 모놀로직 <-> 하나만 서비스를 변경했을 때 해당 부분을 배포 가능

### 1.2.5 조직 부합성

아키텍처에 따른 조직 구성 가능
- 콘웨이의 법칙

### 1.2.6 조합성

조합성 : 컴포넌트 간에 상호 연관성을 다루는 시스템 설계 원칙
- 기능을 재사용할 수 있는 기회가 많다는 것
- 다양한 기기에 대한 유연성을 지원하는 아키텍쳐의 필요성 대두

### 1.2.7 대체 가능성을 위한 최적화

- 레거시 시스템을 차세대 처리하는 데에 부담이 적음
- 필요하지 않으면 쉽게 제거 가능

## 1.3 서비스 지향 아키텍쳐

서비스 지향 아키텍쳐 (SOA) : 서비스의 최종 능력 집합을 제공하는 여러 서비스가 서로 협업하도록 만드는 설계 접근 방식
- 서비스 간 통신은 네트워크 호출
- 과거 통신 프로토콜은 SOAP, 벤더 미들웨어의 세분화에 실패

## 1.4 기타 분해 기술

### 1.4.1 공유 라이브러리

코드베이스를 여러 라이브러리로 분해하는 것
- 라이브러리는 팀과 서비스 간 기능을 공유
- 단점
    1. 기술 이기종성을 잃게 된다 -> 라이브러리를 중심으로 팀이 구성되거나 라이브러리를 재사용하기 때문에
    2. 시스템 일부를 독립적으로 확장하기 어려워진다.
    3. 동적 라이브러리를 사용하지 않는 한 일부 프로세스만 배포가 불가능
    4. 시스템 회복력을 보장하는 구조적 안전조치를 취할 접합부가 부족
- 결합이 발생하는 접점이지만이고 재사용성이 뛰어남

### 1.4.2 모듈

언어마다 독자적인 모듈 분해 기술을 제공

- OSGI의 문제 = 지원없이 모듈 수명주기 관리를 강제하려 한다는 점 (Dependency 버전 관리)
- 과도하게 결합된 통합 기술의 표류 또는 접합부 부족 문제 발생 가능
- 모듈을 잘 분해해도 전문가가 아니기 때문에 사용하기 어려움 (Erlang 언어가 대표적인 예시)

## 1.5 실버불렛은 없다

마이크로서비스는 만능이 아님
- 조직과 시스템에 따라 적절한 시스템을 적용하여 사용 유의



